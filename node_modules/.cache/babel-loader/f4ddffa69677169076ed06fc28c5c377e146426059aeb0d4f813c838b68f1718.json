{"ast":null,"code":"import _regeneratorRuntime from\"C:/Newsapk/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Newsapk/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Newsapk/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import NewsList from'../components/NewsList';import Loader from'../components/Loader';import Search from'../components/Search';import Pagination from'../components/Pagination';import TrendingNews from'../components/TrendingNews';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalPages=_useState8[0],setTotalPages=_useState8[1];var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setCurrentPage(1);// Reset to first page when a new search is performed\nfetchArticles(query,1);case 2:case\"end\":return _context.stop();}},_callee);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var fetchArticles=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(query,page){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;_context2.next=4;return api.get('/everything',{params:{q:query,pageSize:10,page:page}});case 4:response=_context2.sent;setArticles(response.data.articles);setTotalPages(Math.ceil(response.data.totalResults/10));setLoading(false);_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);console.error('Error fetching articles:',_context2.t0);setLoading(false);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function fetchArticles(_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchArticles('',currentPage);},[currentPage]);var goToPage=function goToPage(page){setCurrentPage(page);};var goToPrevPage=function goToPrevPage(){setCurrentPage(function(prevPage){return prevPage-1;});};var goToNextPage=function goToNextPage(){setCurrentPage(function(prevPage){return prevPage+1;});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to the NewsQuake\"}),/*#__PURE__*/_jsx(Search,{handleSearch:handleSearch}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TrendingNews,{}),/*#__PURE__*/_jsx(NewsList,{articles:articles}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,goToPage:goToPage,goToPrevPage:goToPrevPage,goToNextPage:goToNextPage})]})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","NewsList","Loader","Search","Pagination","TrendingNews","api","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Home","_useState","_useState2","_slicedToArray","articles","setArticles","_useState3","_useState4","loading","setLoading","_useState5","_useState6","currentPage","setCurrentPage","_useState7","_useState8","totalPages","setTotalPages","handleSearch","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","query","wrap","_callee$","_context","prev","next","fetchArticles","stop","_x","apply","arguments","_ref2","_callee2","page","response","_callee2$","_context2","get","params","q","pageSize","sent","data","Math","ceil","totalResults","t0","console","error","_x2","_x3","goToPage","goToPrevPage","prevPage","goToNextPage","children"],"sources":["C:/Newsapk/src/pages/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport NewsList from '../components/NewsList';\r\nimport Loader from '../components/Loader';\r\nimport Search from '../components/Search';\r\nimport Pagination from '../components/Pagination';\r\nimport TrendingNews from '../components/TrendingNews';\r\nimport api from '../services/api';\r\n\r\nconst Home = () => {\r\n    const [articles, setArticles] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n\r\n    const handleSearch = async (query) => {\r\n        setCurrentPage(1); // Reset to first page when a new search is performed\r\n        fetchArticles(query, 1);\r\n    };\r\n\r\n    const fetchArticles = async (query, page) => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await api.get('/everything', {\r\n                params: {\r\n                    q: query,\r\n                    pageSize: 10,\r\n                    page: page,\r\n                },\r\n            });\r\n            setArticles(response.data.articles);\r\n            setTotalPages(Math.ceil(response.data.totalResults / 10));\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching articles:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchArticles('', currentPage);\r\n    }, [currentPage]);\r\n\r\n    const goToPage = (page) => {\r\n        setCurrentPage(page);\r\n    };\r\n\r\n    const goToPrevPage = () => {\r\n        setCurrentPage((prevPage) => prevPage - 1);\r\n    };\r\n\r\n    const goToNextPage = () => {\r\n        setCurrentPage((prevPage) => prevPage + 1);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Welcome to the NewsQuake</h1>\r\n            <Search handleSearch={handleSearch} />\r\n            {loading ? (\r\n                <Loader />\r\n            ) : (\r\n                    <>\r\n                        <TrendingNews />\r\n                    <NewsList articles={articles} />\r\n                    <Pagination\r\n                        currentPage={currentPage}\r\n                        totalPages={totalPages}\r\n                        goToPage={goToPage}\r\n                        goToPrevPage={goToPrevPage}\r\n                        goToNextPage={goToNextPage}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}